<expandable-list-item
  [expanded]="screenMode !== 'mobile' || isExpanded"
  [header]="header"
  class="result-group"
  [numberOfItems]="filteredMaps.length || searchResults.length"
  [showBadge]="true"
  [allowTabFocus]="false"
>
  <div class="result-group__container" [ngClass]="{'result-group__container--mobile': screenMode === 'mobile'}">
    @for (result of searchResults; track result; let first = $first) {
      <mat-card
        (click)="selectSearchResult(result)"
        (keydown.space)="selectSearchResult(result)"
        class="result-group__container__element search-result-group__container__element--interactive"
        tabindex="-1"
        searchResultIdentifier
        [text]="result.displayString"
      >
        <mat-card-header *ngIf="result.indexType === 'activeMapItems'" class="result-group__container__element__header"
          >{{ result.indexName }}
        </mat-card-header>
        <mat-card-content
          class="result-group__container__element__content"
          [innerHTML]="result.displayString | highlightSearchQuery: this.searchTerms"
        ></mat-card-content>
        <mat-divider></mat-divider>
      </mat-card>
    }
  </div>
  <div class="result-group__container" [ngClass]="{'result-group__container--mobile': screenMode === 'mobile'}">
    <ul class="list">
      @for (map of filteredMaps; track map; let first = $first) {
        <li class="list-item">
          <mat-card class="result-group__container__element">
            <mat-card-content
              class="result-group__container__element__map-content"
              tabindex="-1"
              (delayedMouseEnter)="addActiveMap(map, true)"
              [delayDurationInMs]="this.hoverDelay"
              (mouseleave)="removeTemporaryMap(map)"
              (click)="addActiveMap(map)"
            >
              <gb2-exit-button
                *ngIf="map.gb2Url; else addToMap"
                [url]="map.gb2Url | appendMapConfigurationToUrl: mapConfigState"
                searchResultIdentifier
                [text]="map.printTitle"
                [isNested]="true"
              ></gb2-exit-button>
              <ng-template #addToMap>
                <mat-icon>add</mat-icon>

                <!--                <button-->
                <!--                  (click)="addActiveMap(map)"-->
                <!--                  color="primary"-->
                <!--                  data-test-id="add-active-map"-->
                <!--                  mat-icon-button-->
                <!--                  searchResultIdentifier-->
                <!--                  [isMapResult]="true"-->
                <!--                  [text]="map.printTitle"-->
                <!--                  (addResultFromArrowNavigation)="addActiveMap(map, true)"-->
                <!--                  (removeResultFromArrowNavigation)="removeTemporaryMap(map)"-->
                <!--                >-->
                <!--                  <mat-icon>add</mat-icon>-->
                <!--                </button>-->
              </ng-template>
              <img [alt]="map.title" [src]="map.icon" class="result-group__container__element__map-content__image" />
              <p
                [innerHTML]="map.title | highlightSearchQuery: this.searchTerms"
                class="result-group__container__element__map-content__title"
                matTooltip="{{ map.title }}"
              ></p>
            </mat-card-content>
            <mat-divider></mat-divider>
          </mat-card>
        </li>
      }
    </ul>
  </div>
</expandable-list-item>
