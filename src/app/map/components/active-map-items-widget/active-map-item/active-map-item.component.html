<!-- Opacity -->
<ktzh-slider-wrapper class="transparency" title="Transparenz" [value]="formattedCurrentOpacity" minValue="100%" maxValue="100%">
  <ng-container content>
    <mat-slider [min]="0" [max]="1" [step]="0.01" color="accent" class="transparency__slider">
      <input matSliderThumb [(ngModel)]="currentOpacity" (valueChange)="onOpacitySliderChange($event)" />
    </mat-slider>
  </ng-container>
</ktzh-slider-wrapper>

<!-- Time slider -->
<ng-container *ngIf="activeMapItem.timeSliderConfiguration && activeMapItem.timeSliderExtent">
  <mat-divider></mat-divider>
  <time-slider
    class="time-slider"
    [initialTimeExtent]="activeMapItem.timeSliderExtent"
    [timeSliderConfiguration]="activeMapItem.timeSliderConfiguration"
    (timeExtentChanged)="onTimeSliderExtentChange($event)"
  ></time-slider>
</ng-container>

<!-- Attribute filter -->
<ng-container *ngIf="activeMapItem.filterConfigurations">
  <mat-divider></mat-divider>
  <div class="attribute-filter">
    <p *ngIf="numberOfChangedFilters > 0" class="attribute-filter__badge" [matBadge]="numberOfChangedFilters" matBadgePosition="before"></p>
    <button class="attribute-filter__button" mat-button (click)="showMapAttributeFilters()">
      <mat-icon>east</mat-icon>
      Attributfilter
    </button>
  </div>
</ng-container>

<!-- List of sublayers (only if the map item is not a single layer itself) -->
<ng-container *ngIf="!activeMapItem.isSingleLayer">
  <mat-divider></mat-divider>

  <div class="sublayer-list" cdkDropList (cdkDropListDropped)="dropSublayer($event)">
    <ng-container *ngFor="let layer of activeMapItem.layers; trackBy: trackByLayerId">
      <!-- Sublayer-->
      <mat-card appearance="raised" class="sublayer" cdkDrag *ngIf="!layer.isHidden">
        <mat-icon class="sublayer__drag-handle" cdkDragHandle>drag_indicator</mat-icon>
        <button mat-icon-button (click)="toggleSublayerVisibility(layer)" [disabled]="!activeMapItem.visible">
          <div class="sublayer__image-container">
            <mat-icon class="sublayer__image-container__image">layers</mat-icon>
            <mat-icon class="sublayer__image-container__visibility" [fontIcon]="layer.visible ? 'visibility' : 'visibility_off'"></mat-icon>
          </div>
        </button>
        <p class="sublayer__title" matTooltip="{{ layer.title }}">{{ layer.title }}</p>
      </mat-card>
    </ng-container>
  </div>
</ng-container>
