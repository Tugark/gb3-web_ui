<api-dialog-wrapper title="Kartendienst importieren">
  <ng-container content>
    <div class="map-import-dialog__content">
      <mat-stepper linear #stepper labelPosition="bottom">
        <mat-step label="Kartendienst laden" [stepControl]="firstStepFormGroup">
          <form [formGroup]="firstStepFormGroup" class="map-import-dialog__content__first-step-form">
            <mat-form-field>
              <mat-label>Kartendienst oder Geodatenformat</mat-label>
              <mat-select formControlName="mapType">
                <mat-option value="wms">WMS</mat-option>
                <mat-option value="kml">KML</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field>
              <mat-label>URL</mat-label>
              <input matInput placeholder="Bitte URL zum Kartendienst eingeben" formControlName="url" />
            </mat-form-field>
          </form>
        </mat-step>
        <mat-step label="Layer auswählen">
          <ul *ngIf="externalServiceActiveMapItem" class="map-import-dialog__content__second-step">
            <li *ngFor="let layer of externalServiceActiveMapItem.settings.layers">{{ layer.title }}</li>
          </ul>
        </mat-step>
        <mat-step label="Anzeigenamen festlegen">
          <form [formGroup]="thirdStepFormGroup" class="map-import-dialog__content__first-step-form">
            <mat-form-field>
              <mat-label>Anzeigenamen</mat-label>
              <input matInput placeholder="Bitte einen Namen eingeben" formControlName="name" />
            </mat-form-field>
          </form>
        </mat-step>
      </mat-stepper>
    </div>
  </ng-container>
  <ng-container actions>
    <button mat-button (click)="cancel()">Abbrechen</button>
    <button
      mat-button
      *ngIf="stepper.selectedIndex < 2; else finishWizard"
      (click)="stepper.next()"
      [disabled]="!firstStepFormGroup.valid && stepper.selectedIndex === 0"
    >
      Weiter
    </button>
    <ng-template #finishWizard>
      <button mat-button (click)="finish()" [disabled]="!thirdStepFormGroup.valid">Hinzufügen</button>
    </ng-template>
  </ng-container>
</api-dialog-wrapper>
